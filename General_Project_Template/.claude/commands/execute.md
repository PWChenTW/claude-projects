---
name: execute
description: 執行階段 - 根據計畫實施開發任務
---

# 執行命令 (Execute Command)

## 命令用途

`/execute [task-id]` - 根據計畫逐步執行開發任務，確保高品質交付。

## 核心理念

> "Plans are nothing; planning is everything" - 計畫本身不重要，計畫的過程才是一切

有了充分的探索和周密的計畫，執行應該是順暢且可預測的。

## 觸發時機

### 自動觸發
- 完成 `/plan` 後自動開始
- 當用戶說"開始實作"或"動手吧"
- `/spec-init` 流程的執行階段

### 手動觸發
```bash
/execute task-2.1        # 執行特定任務
/execute phase-1         # 執行整個階段
/execute --continue      # 繼續上次的執行
/execute --parallel 2.1 2.2  # 並行執行多個任務
```

## 工作流程

### 階段 1：執行準備 (5 分鐘)
```bash
1. 載入計畫
   - 讀取任務清單
   - 確認依賴滿足
   - 準備開發環境

2. 確認就緒
   - 檢查前置條件
   - 確認測試環境
   - 備份關鍵資料

3. 設定檢查點
   - 定義回滾點
   - 設定進度標記
   - 準備監控
```

### 階段 2：迭代執行 (持續)
```bash
對每個任務：
1. 任務開始
   - 更新狀態為 "in_progress"
   - 記錄開始時間
   - 載入任務上下文

2. 實施開發
   - 編寫代碼
   - 即時測試
   - 記錄決策

3. 任務完成
   - 執行測試
   - 代碼審查
   - 更新狀態為 "completed"
```

### 階段 3：階段檢查 (每個里程碑)
```bash
1. 整合測試
   - 執行測試套件
   - 檢查覆蓋率
   - 驗證功能

2. 品質檢查
   - 代碼規範
   - 性能指標
   - 安全掃描

3. 進度同步
   - 更新進度報告
   - 記錄問題
   - 調整計畫
```

## 執行策略

### 任務執行模式
```markdown
1. 順序執行（預設）
   - 按計畫順序執行
   - 確保依賴關係
   - 適合複雜邏輯

2. 並行執行
   - 同時執行獨立任務
   - 提高效率
   - 需要更多協調

3. 快速迭代
   - 小步快跑
   - 頻繁提交
   - 持續反饋
```

### 品質控制檢查表
```markdown
每個任務完成前：
- [ ] 代碼符合專案規範
- [ ] 添加了必要的註釋
- [ ] 通過所有測試
- [ ] 沒有引入新的警告
- [ ] 更新了相關文檔
```

## 輸出格式

### 執行日誌模板
```markdown
# 執行日誌 - [日期]

## 執行摘要
- 開始時間: [HH:MM]
- 計畫任務: [X]
- 完成任務: [Y]
- 遇到問題: [Z]

## 任務執行詳情

### ✅ Task 1.1: [任務名稱]
- 開始: [HH:MM]
- 完成: [HH:MM]
- 耗時: [X分鐘]
- 狀態: 完成

**實作細節：**
- 建立了 [檔案/模組]
- 實作了 [功能]
- 解決了 [問題]

**代碼變更：**
```diff
+ 新增功能 A
+ 新增功能 B
- 移除過時代碼
```

### 🚧 Task 1.2: [任務名稱]
- 開始: [HH:MM]
- 狀態: 進行中
- 進度: 60%

**當前阻塞：**
- 問題: [描述]
- 需要: [資源/決策]

### ⏳ Task 1.3: [任務名稱]
- 狀態: 待執行
- 預計開始: [HH:MM]
- 依賴: Task 1.2

## 代碼提交記錄
```bash
git commit -m "feat: 實作用戶認證基礎架構"
git commit -m "test: 添加認證單元測試"
git commit -m "docs: 更新 API 文檔"
```

## 測試結果
```
測試套件: authentication
通過: 15/15
覆蓋率: 92%
執行時間: 2.3s
```

## 問題和決策
### 問題 1: [描述]
- 原因: [分析]
- 解決: [方案]
- 影響: [評估]

### 決策 1: [描述]
- 選項: A vs B
- 選擇: A
- 理由: [解釋]

## 下一步
- [ ] 繼續 Task 1.3
- [ ] 開始 Phase 2
- [ ] 處理技術債
```

### 進度報告模板
```markdown
# 進度報告 - [功能名稱]
更新時間: [YYYY-MM-DD HH:MM]

## 整體進度
```
[██████████░░░░░░░░░░] 50% 完成
```

## 階段狀態
| 階段 | 狀態 | 進度 | 預計完成 |
|------|------|------|----------|
| Phase 1 | ✅ 完成 | 100% | 已完成 |
| Phase 2 | 🚧 進行中 | 60% | 今天 |
| Phase 3 | ⏳ 待開始 | 0% | 明天 |

## 關鍵指標
- 計畫工時: 16h
- 實際工時: 8.5h
- 剩餘工時: ~7.5h
- 效率: 94%

## 風險更新
- ✅ 風險 A: 已解決
- ⚠️ 風險 B: 監控中
- 🔴 新風險: [描述]
```

## 輸出位置

執行記錄保存到：
- `.kiro/logs/execution/[date]-[feature].md` - 執行日誌
- `.kiro/specs/[feature]/progress.md` - 進度更新
- `.kiro/context/current-execution.md` - 當前執行狀態

## 與其他命令的關係

```mermaid
graph LR
    A[/explore] --> B[/plan]
    B --> C[/execute]
    C --> D[/verify]
    C --> E[/test]
    C --> F[/commit]
    D --> C
```

- **前置命令**: 需要先執行 `/plan`
- **後續命令**: 完成後執行 `/verify`
- **輔助命令**: 執行中使用 `/test` 和 `/commit`

## 執行原則

### 小步快跑
```markdown
1. 每個任務控制在 2 小時內
2. 頻繁提交（每個小功能）
3. 持續測試（TDD 優先）
4. 及時重構（保持代碼整潔）
```

### 保持專注
```markdown
- 一次只做一件事
- 完成當前任務再開始下一個
- 避免範圍蔓延
- 記錄但不立即處理新發現
```

### 持續溝通
```markdown
- 每個里程碑更新進度
- 遇到阻塞立即報告
- 重大決策尋求確認
- 分享關鍵學習
```

## 成功指標

成功的執行應該：
- ✅ 按計畫進度推進
- ✅ 每個任務都有測試
- ✅ 代碼品質維持高標準
- ✅ 及時識別和處理問題
- ✅ 保持清晰的執行記錄

## 注意事項

### ⚠️ 避免的陷阱
- 偏離原計畫太遠
- 忽略測試直接開發
- 累積過多未提交代碼
- 不記錄決策理由

### 💡 最佳實踐
- 開始前確認理解任務
- 使用 TDD 方法
- 保持代碼可審查狀態
- 定期備份和提交

## 範例使用

### 場景 1：執行單個任務
```bash
User: 開始實作用戶註冊功能
Assistant: 開始執行 Task 2.1: 用戶註冊 API...

/execute task-2.1

[載入任務詳情]
[檢查依賴]
[開始編碼]

✅ 已完成：
- 建立 User model
- 實作註冊端點
- 添加輸入驗證
- 編寫單元測試

測試通過 8/8，覆蓋率 95%
是否繼續下一個任務？
```

### 場景 2：處理執行問題
```bash
執行中遇到問題...

⚠️ 問題：資料庫連接失敗
正在診斷...

發現：缺少環境變數 DATABASE_URL
解決方案：
1. 添加 .env 配置
2. 更新文檔
3. 添加配置檢查

問題已解決，繼續執行...
```

### 場景 3：並行執行
```bash
User: 前端和後端可以同時開發
Assistant: 啟動並行執行模式...

/execute --parallel frontend-tasks backend-tasks

[分配資源]
[並行執行]
[同步進度]

並行執行狀態：
- Frontend: 3/5 任務完成
- Backend: 4/6 任務完成
- 無衝突，進度良好
```

## 配置選項

在 `.claude/settings.json` 中配置：
```json
{
  "execute": {
    "mode": "sequential",
    "auto_test": true,
    "auto_commit": false,
    "commit_frequency": "task",
    "test_before_commit": true,
    "parallel_limit": 2
  }
}
```

---

記住：**執行是將計畫變為現實的過程**。保持紀律、注重品質、及時溝通。