# 並行工作流程指南

## 概述
當需要同時進行多個獨立任務時，可以使用並行工作流程來提高開發效率。

## Git Worktree 方法

### 基本概念
Git worktree 允許你在不同目錄中同時檢出同一個倉庫的不同分支，實現真正的並行開發。

### 工作流程

#### 1. 創建並行工作空間
```bash
# 為每個任務創建獨立的工作目錄
git worktree add <path> -b <branch-name>
```

#### 2. 獨立開發
- 每個 worktree 都是完全獨立的工作環境
- 可以在不同目錄運行獨立的 Claude Code 實例
- 文件修改不會互相影響

#### 3. 同步與合併
- 各自提交到對應的分支
- 完成後合併回主分支
- 清理不再需要的 worktree

### 使用場景
- 需要同時開發多個獨立功能
- 不同任務需要不同的 Sub Agents 處理
- 任務之間沒有直接依賴關係

## 多實例協作方法

### 基本概念
在同一個代碼庫中開啟多個 Claude Code 實例，通過角色分工來協作。

### 協作模式

#### 1. 角色分配
- **架構實例**：負責系統設計和技術決策
- **開發實例**：負責具體功能實現
- **測試實例**：負責質量保證和測試

#### 2. 分支策略
- 每個角色/任務使用獨立分支
- 定期同步和整合
- 使用 PR 進行代碼審查

#### 3. 溝通機制
- 通過 Git commit messages 溝通進度
- 在 `.kiro/` 知識庫中共享決策
- 使用 TODO 文件追蹤任務狀態

### 使用場景
- 需要不同專業視角的任務
- 任務之間有一定關聯性
- 需要持續溝通和協調

## 選擇建議

### 使用 Git Worktree 當：
- ✅ 任務完全獨立
- ✅ 需要隔離的開發環境
- ✅ 並行任務數量較少（2-3個）

### 使用多實例協作當：
- ✅ 任務需要頻繁協調
- ✅ 需要共享上下文
- ✅ 團隊角色明確

## 最佳實踐

1. **任務劃分**
   - 確保任務邊界清晰
   - 最小化任務間依賴
   - 每個任務有明確的完成標準

2. **進度管理**
   - 使用 `/spec-implement` 追蹤各自進度
   - 定期同步狀態
   - 及時處理衝突

3. **知識共享**
   - 更新 `.kiro/` 中的共享知識
   - 記錄重要決策
   - 保持文檔同步

4. **質量控制**
   - 每個並行任務都要執行測試
   - 合併前進行代碼審查
   - 確保整合後系統正常運作