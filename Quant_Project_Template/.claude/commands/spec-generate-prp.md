# 生成實作藍圖 (PRP 風格)

基於上下文工程原則，為功能實作生成全面的產品需求提示 (Product Requirements Prompt)。

## 流程

1. **研究階段**
   - 分析專案中現有的程式碼模式
   - 在 docs/examples/ 中搜尋類似的實作
   - 研究外部文檔和最佳實踐
   - 識別實作的特殊情況、陷阱和邊緣案例

2. **上下文組裝**
   - 從 docs/examples/ 收集所有相關範例
   - 參考 .kiro/steering/ 中的架構決策
   - 包含驗證需求和測試場景
   - 收集相關的外部文檔連結

3. **藍圖創建**
   - 創建包含逐步邏輯的詳細偽代碼
   - 定義具有依賴關係的順序任務分解
   - 指定錯誤處理策略和邊緣案例
   - 概述包含具體測試案例的測試方法
   - 包含性能考量和基準測試

4. **驗證關卡**
   - 定義所需的語法/風格檢查
   - 列出單元測試需求和覆蓋率目標
   - 指定整合測試需求
   - 設定性能基準和指標
   - 包含安全驗證需求

## 輸出格式

將藍圖儲存為 `.kiro/specs/{功能名稱}/implementation_blueprint.md`：

```markdown
# 實作藍圖：{功能名稱}

## 上下文摘要
- **信心分數**：{1-10}
- **預估複雜度**：{低/中/高}
- **依賴項**：依賴項列表
- **風險因素**：潛在問題或阻礙

## 現有模式
### 程式碼範例
- 參考類似的實作
- 來自 docs/examples/ 的模式

### 外部文檔
- API 文檔連結
- 函式庫參考
- 最佳實踐指南

## 實作計畫

### 階段 1：基礎
1. **任務**：{具體任務}
   - **偽代碼**：
     ```
     // 詳細邏輯
     ```
   - **驗證**：如何驗證完成
   - **依賴**：必須先完成什麼

### 階段 2：核心邏輯
[類似結構...]

### 階段 3：整合
[類似結構...]

## 錯誤處理策略
- 預期錯誤和處理方法
- 適用的重試邏輯
- 面向使用者的錯誤訊息

## 測試策略
### 單元測試
- 測試案例 1：{描述}
  - 輸入：{測試輸入}
  - 預期：{預期輸出}

### 整合測試
- 場景 1：{描述}
  - 設置：{測試設置}
  - 操作：{測試操作}
  - 斷言：{預期結果}

## 性能考量
- 預期負載特性
- 優化機會
- 監控點

## 安全檢查清單
- [ ] 輸入驗證
- [ ] 身份驗證檢查
- [ ] 授權驗證
- [ ] 資料清理
- [ ] 安全通訊

## 推出計畫
1. 功能開關實作
2. 漸進推出策略
3. 回滾程序
4. 成功指標
```

## 使用範例

```
/spec-generate-prp user-authentication

這將會：
1. 研究程式碼庫中現有的身份驗證模式
2. 在 docs/examples/code_patterns/ 中尋找範例
3. 創建全面的實作藍圖
4. 儲存到 .kiro/specs/user-authentication/implementation_blueprint.md
```

## 主要優勢

- **全面的上下文**：所有實作細節集中在一處
- **減少歧義**：清晰的偽代碼和範例
- **更好的規劃**：分階段方法與驗證關卡
- **品質保證**：內建測試和安全考量
- **信心評分**：了解實作的準備程度